1. ТРЕБОВАНИЯ ДЛЯ ЗАПУСКА И РАБОТЫ E-IMZO
1.1. Должно быть установлено JRE 1.8 (OpenJDK или Oracle JRE) соответствующей ОС.
     В переменной окружения PATH должен быть прописан путь к java.
1.2. При подключении USB-флешки с ключами ЭЦП (в корне или в директории DSKEYS),
     флешка должна монтироваться в директории (OC Linux) /media/ или (OC MacOS) /Volumes/.
1.3. После распаковки файл E-IMZO.sh должен быть прописан в список приложения автозагрузки,
     руководствуясь инструкцией соответствующей ОС.
1.4. Требуется Mozilla Firefox или Google Chrome последней версии (или другой поддерживающей HTML5).

2. НАСТРОЙКА БРАУЗЕРА Mozilla Firefox
2.1. После запуска файла E-IMZO.sh, в браузере Mozilla Firefox откройте адрес https://127.0.0.1:64443/.
2.2. На сообщение "ЭТО СОЕДИНЕНИЕ ЯВЛЯЕТСЯ НЕДОВЕРЕННЫМ", нажмите "Я понимаю риск", далее кнопку "Добавить исключение...".
2.3. В окне "Добавить исключение безопасности", отметьте поле "Постоянно хранить это исключение" и нажмите кнопку "Подтвердить исключение безопасности". 

3. НАСТРОЙКА БРАУЗЕРА Google Chrome
3.1. После запуска файла E-IMZO.sh, в браузере Google Chrome откройте адрес chrome://flags
3.2. Найдите пункт "Allow invalid certificates for resources loaded from localhost. Mac, Windows, Linux, Chrome OS, Android"
3.3. Нажмите на ссылку "Enable". 

4. НАСТРОЙКА БРАУЗЕРА Google Chrome версии 105 и выше
4.1. После запуска файла E-IMZO.sh, в браузере Google Chrome откройте адрес chrome://settings/certificates?search=certificates
4.2. Нажмите на вкладку "Authorities" и кнопку "Import".
4.3. Выберите файл E-IMZO.pem и отметьте галочку "Trust this certificate for identifying websites" и нажмите "OK".
4.4. В списке сертификатов должен появится "org-ГУП Научно-информационный центр «ЯНГИ ТЕХНОЛОГИЯЛАР»".

После настройки, открыв адрес https://127.0.0.1:64443/ вы обнаружите сообщение "Модуль E-IMZO-v4.00 установлен и работает на этом компьютере.", означающая что 
приложение E-IMZO работает и браузер настроен правильно.

ВНИМАНИЕ !!! Если вы подключены к интернету через прокси сервер, добавьте в браузере исключающее правило для IP 127.0.0.1 и localhost.

5. ПОДДЕРЖКА ID-КАРТ E-IMZO
5.1. Установите нужные пакеты (для ОС Ubuntu)
    sudo apt-get install pcscd pcsc-tools libpcsclite1 libccid

    Для ОС MacOS нужно удалить Java 1.8 и установить Java 17
    (https://download.oracle.com/java/17/archive/jdk-17.0.1_macos-aarch64_bin.dmg)

    ВАЖНО !!! PFX-ключи созданные на Java 17 и выше не работают на Java 1.8 и на мобильном приложении E-IMZO-ID-card.

5.2. Добавьте в параметры запуска E-IMZO в файле E-IMZO.sh следующую строку (для ОС Linux)
    -Dsun.security.smartcardio.library=/usr/lib/x86_64-linux-gnu/libpcsclite.so.1